# ============================================
# 游댢 Archivo principal de configuraci칩n NGINX
# Proyecto: PETBIO Web Gateway
# ============================================

# Definici칩n del usuario del proceso y n칰mero de workers
user  www-data;
worker_processes  auto;

# Logs y PID
error_log  /var/log/nginx/error.log warn;
pid        /var/run/nginx.pid;

# ============================================
# 游대 Definici칩n de upstreams (servicios internos)
# ============================================
upstream php {
    server 127.0.0.1:9000;
        keepalive 8;
        }

        # Si tienes m치s servicios PHP-FPM separados podr칤as definir otros:
        # upstream php_secure_web { server 127.0.0.1:9001; }
        # upstream wordpress_backend { server 127.0.0.1:8080; }

        # ============================================
        # 丘뙖잺 BLOQUE DE EVENTOS
        # ============================================
        events {
            worker_connections 1024;
                multi_accept on;
                }

                # ============================================
                # 游깷 BLOQUE HTTP GLOBAL
                # ============================================
                http {
                    include       mime.types;
                        default_type  application/octet-stream;

                            # Logs globales
                                access_log  /var/log/nginx/access.log;
                                    error_log   /var/log/nginx/error.log;

                                        # Performance
                                            sendfile        on;
                                                tcp_nopush      on;
                                                    tcp_nodelay     on;
                                                        keepalive_timeout  65;
                                                            types_hash_max_size 2048;

                                                                # Seguridad
                                                                    server_tokens off;

                                                                        # Compresi칩n Gzip
                                                                            gzip on;
                                                                                gzip_disable "msie6";
                                                                                    gzip_vary on;
                                                                                        gzip_proxied any;
                                                                                            gzip_comp_level 5;
                                                                                                gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;

                                                                                                    # Headers globales de seguridad
                                                                                                        include /etc/nginx/security-headers.conf;

                                                                                                            # Tama침o m치ximo de subida global
                                                                                                                client_max_body_size 250M;

                                                                                                                    # ============================================
                                                                                                                        # 游빌 Incluir todos los virtual hosts definidos
                                                                                                                            # ============================================
                                                                                                                                include /etc/nginx/conf.d/*.conf;
                                                                                                                                }
                                                                                                                                